(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(14),c=t.n(o),u=t(4),i=t(2),l=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"filter shown with: "),r.a.createElement("input",{value:e.filter,onChange:e.handleFilterChange}))},s=function(e){return r.a.createElement("button",{onClick:e.handleClick},e.text)},m=function(e){var n=e.person,t=e.deletePerson;return r.a.createElement("div",null,r.a.createElement("span",null,n.name,"  ",n.number),r.a.createElement(s,{handleClick:function(){return t(n.id)},text:"delete"}))},f=function(e){var n=e.persons,t=e.deletePerson;return r.a.createElement("div",null,n.map((function(e){return r.a.createElement(m,{key:e.id,person:e,deletePerson:t})})))},d=function(e){return r.a.createElement("form",{onSubmit:e.submission},r.a.createElement("div",null,r.a.createElement("span",null,"name: "),r.a.createElement("input",{value:e.newName,onChange:e.nameChange})),r.a.createElement("div",null,r.a.createElement("span",null,"number: "),r.a.createElement("input",{value:e.newNumber,onChange:e.numberChange})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",disabled:e.isDisabled},"add")))},h=function(e){var n=e.notification;if(!n)return null;var t="notification notification--".concat(n.type);return r.a.createElement("p",{className:t},n.message)},b=t(3),p=t.n(b),E="api/persons",v=function(){return p.a.get(E).then((function(e){return e.data}))},w=function(e){return p.a.post(E,e).then((function(e){return e.data}))},g=function(e){return p.a.delete("".concat(E,"/").concat(e)).then((function(e){return e}))},j=function(e,n){return p.a.put("".concat(E,"/").concat(e),n).then((function(e){return e.data}))},O=function(){var e=Object(a.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),s=Object(i.a)(c,2),m=s[0],b=s[1],p=Object(a.useState)(""),E=Object(i.a)(p,2),O=E[0],k=E[1],y=Object(a.useState)(""),C=Object(i.a)(y,2),P=C[0],N=C[1],S=Object(a.useState)(void 0),B=Object(i.a)(S,2),D=B[0],F=B[1],x=function(e){F(e),setTimeout((function(){return F(void 0)}),5e3)};Object(a.useEffect)((function(){v().then((function(e){return o(e)}))}),[]);var J=function(e){return!e||/^\s*$/.test(e)},L=function(e){return e.name.toLowerCase()},T=function(e){return{type:"error",message:e}},A=function(e){return{type:"success",message:e}},I=function(){var e={name:m.trim(),number:O.trim()};w(e).then((function(e){o(t.concat(e)),b(""),k(""),x(A("".concat(e.name," was successfully added to PhoneBook!")))})).catch((function(e){x(T(e.response.data.error))}))},$=function(e){e.number=O.trim(),j(e.id,e).then((function(e){o(Object(u.a)(t).map((function(n){return n.id!==e.id?n:e}))),b(""),k(""),x(A("".concat(e.name," was successfully updated!")))})).catch((function(n){x(T("".concat(e.name," is already removed from PhoneBook!")))}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Phonebook"),r.a.createElement(h,{notification:D}),r.a.createElement(l,{filter:P,handleFilterChange:function(e){return N(e.target.value)}}),r.a.createElement("h2",null,"Add New"),r.a.createElement(d,{submission:function(e){e.preventDefault();var n=t.find((function(e){return e.name===m}));n?window.confirm("".concat(n.name," is already added to phonebook replace the old number with the new one?"))&&$(n):I()},isDisabled:J(m)||J(O),newName:m,newNumber:O,nameChange:function(e){return b(e.target.value)},numberChange:function(e){return k(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(f,{persons:function(){var e=Object(u.a)(t);return J(P)||(e=Object(u.a)(t).filter((function(e){return L(e).includes(P.toLowerCase())}))),e.sort((function(e,n){return L(e)<L(n)?-1:L(e)>L(n)?1:0}))}(),deletePerson:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Do you really want to delete ".concat(n.name,"?"))&&g(e).then((function(){o(Object(u.a)(t).filter((function(n){return n.id!==e}))),x(A("".concat(n.name," was successfully removed from PhoneBook!")))})).catch((function(e){x(T("This person is already removed from PhoneBook!"))}))}}))};t(37);c.a.render(r.a.createElement(O,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.54f517bb.chunk.js.map